## 요구 사항

**API 요구사항**

- PATCH  `/point/{id}/charge` : 포인트를 충전한다.
- PATCH `/point/{id}/use` : 포인트를 사용한다.
- GET `/point/{id}` : 포인트를 조회한다.

**기능 요구사항**

- GET `/point/{id}/histories` : 포인트 내역을 조회한다.
- 잔고가 부족할 경우, 포인트 사용은 실패하여야 합니다.

### 내가 정한 추가 요구사항

- 사용자가 보유할 수 있는 최대 포인트는 100만 포인트다.
- 한번에 충전할 수 있는 포인트는 최대 10만 포인트다.

### 기능 구현

- [x] 포인트 충전
    - [x] 최대 충전량 제한(100만)
    - [x] 단 건 충전량 제한(10만)
- [x] 포인트 사용
- [x] 포인트 조회
- [x] 포인트 사용 & 충전 내역 조회

## 테스트 작성

### 통합 테스트

- `Rest Assured` 를 사용한 통합 테스트
    - 요구사항에 따른 기능 구현 검증 및 시나리오 통합 테스트

### 단위 테스트

- `WebMvc` 를 사용한 컨트롤러 테스트
    - 사용자 입력 및 반환 값 검증
- `Junit5, Fake 객체` 를 사용한 서비스 테스트
    - 비즈니스 로직 테스트
- `Kotest, Mockk` 를 사용한 서비스 테스트
    - `kotest`, `mockk` 학습을 위한 테스트

## 학습

### 궁금증

1. 인터페이스의 사용
    - 요즘은 `Service` 에 변화가 많지 않아 `Service interface - Service Impl` 의 사용은 좋지 못한 방식이라는 이야기를 여기저기서   
      많이 들었는데 이게 `usecase` 별로 인터페이스를 나누고 `service` 에서 구현하는것 또한 이런 좋지 못한 패턴에 포함되는 부분인지 궁금합니다.
2. 통합 테스트
    - 뭔가 통합 테스트가 없으면 불안한데 이걸 어떻게 해소할 수 있을까요? 사실 제가 작성하면서도 귀찮다고 생각은 하지만 막상 작성하지 않으려다 보니,  
      이게 정말 제대로 동작하는게 맞는건지 불안한데 이건 제 코드에 대한 믿음이 없어서 그런걸까요..
3. 문서화를 위한 테스트
    - `Spring Rest Docs` 를 활용해서 문서화를 위한 테스트를 주로 작성하고 있는데, 이게 작성하다 보면 `Controller` 테스트와 유사한 부분이
      많으면서도 역할이 다른거라 생각되어 각각 작성하고 있는데 혹시 어떻게 사용하고 계신지 궁금합니다.


## 피드백

### Step.1, 2

```text
- 정책을 잘 정의하고, 4가지 기능에 대한 구현이 잘 작성되었는지 : O
- 4가지 기본 기능에 대한 테스트가 잘 작성되었는지 : X(구현과 테스트가 되어있으나, 모든 구현 클래스는 책임을 갖고 그에 따른 검증을 클래스 단위로 해야합니다. UserPoint 클래스의 책임 검증을 UserPointTest가 아닌 PointServiceTest에서 처리하고 있는데 TDD 및 단위테스트의 가장 중요한 원칙인 클래스의 책임을 검증하는 것이 핵심입니다.)
피드백:
- 코드의 완성도가 높고 클래스 단위의 설계가 잘 분리되어 있습니다. 현업에서 잘 배우신 것 같습니다. 다만, 클래스의 책임을 부여하고 검증하는 것을 지속하는 TDD의 원칙을 준수하며 설계를 진행하지 않은 코드로 보입니다.
- 언급을 할까 했는데, 계층 사이 인터페이스도 저는 반드시 필요하다고 생각하지는 않습니다. 나아가, 각 인터페이스와 구현체의 패키지 구조를 단순화하면 좋겠습니다.
- 인터페이스 사용은 다수의 구현체가 동적으로 활용되지 않는다면 활용도가 떨어진다고 생각합니다.
- 테스트 코드는 작성하기 쉽고 실행하기 쉬워야 지속 가능합니다. 통합테스트의 범위도 적절하게 분리하는 것이 좋습니다. 시스템 안정성 100%는 테스트 코드를 통해 이룰 수는 없습니다.
```

### 이후 학습

- 계층별 인터페이스 사용에 대한 근거를 좀 더 만들어보고, 인터페이스 사용에 대해 다시 한번 생각해보자.
